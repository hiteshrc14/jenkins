import jenkins.model.Jenkins
import org.jenkinsci.plugins.workflow.job.WorkflowJob

Jenkins.instance.allItems.findAll { it instanceof WorkflowJob }.each { job ->
    def longestDuration = 0

    def masterBuild = job.getLastBuild()
    while (masterBuild != null) {
        if (masterBuild.duration > longestDuration) {
            longestDuration = masterBuild.duration
        }
        masterBuild = masterBuild.getPreviousBuild()
    }

    if (longestDuration > 0) {
        println "Pipeline: ${job.fullName} | Longest Master Build Duration: ${longestDuration}ms"
    } else {
        println "Pipeline: ${job.fullName} | No master builds found."
    }
}







